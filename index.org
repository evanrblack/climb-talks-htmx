#+title: HTMX
#+options: toc:nil
#+options: num:nil
#+options: author:nil
#+options: creator:nil
#+options: date:nil
#+options: timestamp:nil
#+reveal_root: https://cdn.jsdelivr.net/npm/reveal.js@4.4.0
#+reveal_reveal_js_version: 4
#+reveal_theme: simple
# #+reveal_init_options: transition: 'none', navigationMode: 'linear'
#+reveal_init_options: width: 1280
#+reveal_hlevel: 2
#+reveal_extra_css: print.css

* The Story So Far
- 1997: DHTML
- 1999: AJAX
- 2004: Gmail, Google Maps
- 2006: jQuery
- 2010: Angular
- 2013: React, Vue, Intercooler
- 2020: HTMX

* SPA Day
- Most things don't need to be single page apps
- Even SPAs have more traditional pages: settings, user profile, etc
- Island architecture
- Complexity where you need it

* HTMX-isms
- Embrace hypertext. Be declarative.
- Use built-in browser functionality when possible.
- JSON to React to HTML  vs.  Just HTML
- Less code, faster loading.
- JS where you need it.

* HOWL Stack
- Hypertext On Whatever /you'd/ Like.
- If your favored stack can serve HTML, you're good to go!
- Avoid "We'll need a React SPA to have this one thing update."
- React is becoming even more lock-in-y with Next.js.

* Five Main Attributes
- ~hx-get~
- ~hx-target~
- ~hx-trigger~
- ~hx-swap~
- ~hx-select~

* hx-get
- Choose the method and path of the request.
- Also ~hx-post~, ~hx-put~, ~hx-patch~, ~hx-delete~.

#+begin_src html
  <button type="button" hx-get="/content">
    Load Content
  </button>
#+end_src

* hx-get
#+REVEAL_HTML: <video src="videos/hx-get.mp4" loading="lazy" autoplay loop mute style="border: 2px solid black">

* hx-target
- Choose where the response content goes.

#+begin_src html
  <div id="content-container">
    No content yet.
  </div>

  <button type="button" hx-get="/content" hx-target="#content-container">
    Load Content
  </button>
#+end_src

* hx-target
#+REVEAL_HTML: <video src="videos/hx-target.mp4" loading="lazy" autoplay loop mute style="border: 2px solid black">

* hx-trigger
- Choose what causes the request.
- Also some modifiers like ~delay~.

#+begin_src html
  <div id="content-container">
    No content yet.
  </div>

  <input hx-get="/content"
         hx-target="#content-container"
         hx-trigger="onkeyup delay:1s">
#+end_src

* hx-trigger
#+REVEAL_HTML: <video src="videos/hx-trigger.mp4" loading="lazy" autoplay loop mute style="border: 2px solid black">

* hx-swap
- Choose how to "swap in" the content.
- ~outerHTML~, ~innerHTML~, ~beforeend~, etc.
- Morph swaps preserve focus and state.

#+begin_src html
  <ul id="my-list"></ul>

  <form action="POST"
        hx-post="/list-items"
        hx-target="#my-list"
        hx-swap="beforeend">
    <input type="text" name="name">
    <input type="submit">
  </form>
#+end_src

* hx-swap
#+REVEAL_HTML: <video src="videos/hx-swap.mp4" loading="lazy" autoplay loop mute style="border: 2px solid black">

* hx-select
- Pull out content from the response.

#+begin_src js-jsx
  app.get('/content', (c) => (
      <>
        <div id="content-container">
          <strong>{new Date()}</strong>
        </div>

        <input hx-get="/content"
               hx-select="#content-container"
               hx-target="#content-container"
               hx-trigger="onkeyup delay:1s" />
      </>
  ));
#+end_src

* hx-select
#+REVEAL_HTML: <video src="videos/hx-select.mp4" loading="lazy" autoplay loop mute style="border: 2px solid black">

* Todos
#+REVEAL_HTML: <video src="videos/todos.mp4" loading="lazy" autoplay loop mute style="border: 2px solid black; height: 400px">

* Factoring Views
- Break it up into things separately retrieved.
- Use ~HX-*~ headers to determine partial content.
- Or not, and just use ~hx-select~.

* HX-Boost
- ~hx-boost="true"~ makes links and forms do page-replacement.
- Paint holding kinda makes this less needed.
- Some novel uses, e.g. music player that stays between pages.

* Other stuff
- ~hx-indicator~: loading indicator
- ~hx-confirm~: confirmation dialog
- ~hx-push-url~: update URL
- ~hyperscript~: concise language

* Resources
- [[https://htmx.org/][htmx.org]]
- [[https://hypermedia.systems/][hypermedia.systems]]
